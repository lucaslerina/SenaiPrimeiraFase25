<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard | LiftSenai</title>
    <link rel="stylesheet" href="css/style_logado.css">


</head>

<body>
    <div class="dashboard-container">

        <nav class="sidebar box-style">
            <h1 class="logo">LiftSenai</h1>


            <!-- barra lateral com os botÃµes-->
            <div class="menu">
                <a href="2dashboard.html" class="btao-naveg active" data-content="perfil">ğŸªª Meu Perfil</a>
                <a href="3procurar.html" class="btao-naveg" data-content="procurar">ğŸ” Procurar Carona</a>
                <a href="4oferecer.html" class="btao-naveg" data-content="oferecer">ğŸš˜ Oferecer Carona</a>
                <a href="5estatisticas.html" class="btao-naveg" data-content="estatisticas">ğŸ“Š EstatÃ­sticas e
                    AvaliaÃ§Ãµes</a>
            </div>

            <button id="logout-btn" class="logout-btn" onclick="window.location.href='1index.html'"> â› Deslogar</button>
        </nav>

        <!-- conteÃºdo na tela pro usuÃ¡rio-->

        <main class="coluna-paginas">
            
            <section id="perfil" class="btao-paginas active">
                <h2>ğŸªª Meu Perfil</h2>
                <p>Nome: <span id="perfilNome"></span></p>
                <p>UsuÃ¡rio: <span id="perfilUsuario"></span></p>
                <hr>
                <h3>Dados de Cadastro</h3>
                <p>MatrÃ­cula: <span id="perfilMatricula"></span></p>
                <p>EndereÃ§o: <span id="perfilEndereco"></span></p>
                <p>CNH: <span id="perfilCnh"></span></p>
                
               <button class="editarPerfil" onclick="editarPerfil()">Editar perfil</button>
<button class="excluirPerfil" onclick="excluirPerfil()">Excluir perfil</button>

            </section>
            

        </main>

    </div>
    <script src="scriptDashboard.js"></script>
</body>

</html>

document.addEventListener('DOMContentLoaded', carregarDadosUsuario);


function carregarDadosUsuario() {
    const usuarioLogado = JSON.parse(localStorage.getItem("usuarioAtual"));

    if (!usuarioLogado) {
        window.location.href = "1index.html";
        return;
    }

    document.getElementById('perfilNome').textContent = usuarioLogado.nome;
    document.getElementById('perfilMatricula').textContent = usuarioLogado.matricula;
    document.getElementById('perfilEndereco').textContent = usuarioLogado.endereco;
    document.getElementById('perfilCnh').textContent = usuarioLogado.cnh;
    document.getElementById('perfilUsuario').textContent = usuarioLogado.usuarioNome;
}


function editarPerfil() {
    const usuarioLogado = JSON.parse(localStorage.getItem("usuarioAtual"));
    
  
    const novoNome = prompt("Novo nome:", usuarioLogado.nome);
    const novoEndereco = prompt("Novo endereÃ§o:", usuarioLogado.endereco);

    if (novoNome && novoEndereco) {
      
        usuarioLogado.nome = novoNome;
        usuarioLogado.endereco = novoEndereco;

       
        let listaCadastros = JSON.parse(localStorage.getItem("cadastro")) || [];
        const index = listaCadastros.findIndex(u => u.usuarioNome === usuarioLogado.usuarioNome);
        
        if (index !== -1) {
            listaCadastros[index] = usuarioLogado;
            localStorage.setItem("cadastro", JSON.stringify(listaCadastros));
        }

        
        localStorage.setItem("usuarioAtual", JSON.stringify(usuarioLogado));
        alert("Perfil atualizado com sucesso!");
        carregarDadosUsuario();
    }
}


function excluirPerfil() {
    if (confirm("TEM CERTEZA? Isso excluirÃ¡ sua conta permanentemente.")) {
        const usuarioLogado = JSON.parse(localStorage.getItem("usuarioAtual"));
        let listaCadastros = JSON.parse(localStorage.getItem("cadastro")) || [];

       
        const novaLista = listaCadastros.filter(u => u.usuarioNome !== usuarioLogado.usuarioNome);
        
        localStorage.setItem("cadastro", JSON.stringify(novaLista));
        localStorage.removeItem("usuarioAtual"); 

        alert("Conta excluÃ­da.");
        window.location.href = "1index.html";
    }
}




